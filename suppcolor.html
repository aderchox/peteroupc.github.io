<!DOCTYPE html><html><head><meta http-equiv=Content-Type content="text/html; charset=utf-8"><title>Supplemental Color Topics for Programmers</title><meta name="viewport" content="width=device-width"><link rel=stylesheet type="text/css" href="/style.css"></head><body>  <div class="header">
<p><a href="#navigation">Menu</a> - <a href="#top">Top</a> - <a href="/">Home</a> -
<a href="http://peteroupc.github.io/">Donate to Me</a></p></div>
<div class="mainarea" id="top">
<h1>Supplemental Color Topics for Programmers</h1>

<p><a href="mailto:poccil14@gmail.com">Peter Occil</a></p>

<p><a id=Introduction></a></p>

<h2>Introduction</h2>

<p>This document presents supplemental topics about color.</p>

<p><a id=Contents></a></p>

<h2>Contents</h2>

<ul>
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Contents">Contents</a></li>
<li><a href="#Notation_and_Definitions">Notation and Definitions</a></li>
<li><a href="#Overview_of_Color_Vision">Overview of Color Vision</a>

<ul>
<li><a href="#Defective_and_Animal_Color_Vision">Defective and Animal Color Vision</a></li>
<li><a href="#Opponent_Signals">Opponent Signals</a></li>
</ul></li>
<li><a href="#Kinds_of_Color_Spaces">Kinds of Color Spaces</a></li>
<li><a href="#Calculating_the_Mean_Hue_Angle">Calculating the Mean Hue Angle</a></li>
<li><a href="#Additional_Color_Formats">Additional Color Formats</a></li>
<li><a href="#Additional_Color_Models">Additional Color Models</a>

<ul>
<li><a href="#HSI">HSI</a></li>
<li><a href="#Hunter_L_a_b">Hunter L,a,b</a></li>
</ul></li>
<li><a href="#Irrelevant_Topics">Irrelevant Topics</a></li>
<li><a href="#Notes">Notes</a></li>
<li><a href="#License">License</a></li>
</ul>

<p><a id=Notation_and_Definitions></a></p>

<h2>Notation and Definitions</h2>

<p>In this document:</p>

<ul>
<li>The <a href="https://peteroupc.github.io/pseudocode.html"><strong>pseudocode conventions</strong></a> apply to this document.</li>
<li>The term <em>RGB</em> means red-green-blue.</li>
<li>The abbreviation <em>CIE</em> means the International Commission on Illumination (CIE, for its initials in French).</li>
</ul>

<p><a id=Overview_of_Color_Vision></a></p>

<h2>Overview of Color Vision</h2>

<p>Color is possible only if three things exist, namely&mdash;</p>

<ul>
<li><em>light</em>,</li>
<li>an <em>object</em> receiving that light (a surface, for example), and</li>
<li>an <em>observer</em> viewing that object and interpreting the light received from it.</li>
</ul>

<p>Because of this, color does not exist in light, in objects receiving light, in light sources, or even in the signals generated by the eyes when they see things.  In the Opticks, I. Newton said, &quot;the Rays to speak properly are not coloured.&quot;</p>

<p>The three things that together make color possible &mdash; light, object, and observer &mdash; can be modeled by curves that span the <em>visible spectrum</em> (the part of the spectrum in which the eye senses light), as described in the section &quot;<a href="https://peteroupc.github.io/colorgen.html#Spectral_Color_Functions">Spectral Color Functions</a>&quot;. Also, any change in the light, object, or observer can also change the color sensation.</p>

<p>The retina of the human eye contains three kinds of cones (L, M, and S), and the visual system senses color by the relative degree to which all three kinds of cones respond to a stimulus of light.  The cone responses can be described by three overlapping &quot;curves&quot; that peak at different wavelengths of the visible spectrum &mdash; where the M and L curves span the entire visible spectrum.  As a result, at least two of the three kinds of cones will respond to light, not just one by itself.</p>

<p>Because there are three kinds of cones, three numbers are enough to uniquely identify a color humans can see &mdash; which is why many color models are 3-dimensional, such as RGB or CIE XYZ.</p>

<p><a id=Defective_and_Animal_Color_Vision></a></p>

<h3>Defective and Animal Color Vision</h3>

<p><a href="http://eilv.cie.co.at/term/287">Defective color vision</a>, including so-called <a href="https://en.wikipedia.org/wiki/Color_blindness">&quot;colorblindness&quot;</a>, results from defects in one or more kinds of cones and affects a small portion of people, mostly males. Two forms of defective color vision, <em>protanopia</em> and <em>deuteranopia</em>, result from defects in the L or M cones, respectively, so that for a person with either condition, color stimuli resulting in a similar response of the S and M or S and L cones, respectively (usually from magenta-red and green-cyan hues), are harder to distinguish.  Even among people with normal color vision, though, there is <a href="http://www.handprint.com/HP/WCL/color2.html#individualdiffs">wide variation</a> in color vision among individuals &mdash; such that they are not guaranteed to agree on how to identify any particular color.</p>

<p>In addition to humans, many other animals possess color vision to a greater or lesser extent.  As an extreme example, the <a href="https://en.wikipedia.org/wiki/Mantis_shrimp">mantis shrimp</a> has 16 different cone types, making its color vision considerably sharper than humans&#39;.</p>

<p><a id=Opponent_Signals></a></p>

<h3>Opponent Signals</h3>

<p>The human visual system compares the cone responses it receives and converts them to three kinds of signals, namely&mdash;</p>

<ul>
<li>a light-dark signal, which is roughly the sum of the three cone responses,</li>
<li>a red/green <em>opponent signal</em>, which is roughly the M response minus the L response, and</li>
<li>a blue/yellow <em>opponent signal</em>, which is roughly the sum of the M and L responses minus the S response.</li>
</ul>

<p>It&#39;s these signals, and not the cone responses, that are passed to the brain.  The theory of opponent colors is largely due to E. Hering&#39;s work and was reconciled with the three-cone theory around the mid-20th century (for example, through work by Hurvich and Jameson).</p>

<p><a id=Kinds_of_Color_Spaces></a></p>

<h2>Kinds of Color Spaces</h2>

<p>Color spaces can be categorized as any of the following:</p>

<ul>
<li><p><strong>Device-dependent</strong> color spaces are based on how devices display or record color.  Such color spaces include&mdash;</p>

<ul>
<li><strong>light-mixture color spaces</strong>, based on mixtures of colored lights (such as RGB, red-green-blue), and</li>
<li><strong>colorant-mixture color spaces</strong>, based on mixtures of inks, dyes, or other colorants (such as CMYK, cyan-magenta-yellow-black).<sup><a href="#Note1">(1)</a></sup></li>
</ul>

<p>A color space defined in terms of a device-dependent color space is itself device-dependent.  Examples of this include HSL, HSV, and HWB, which transform an RGB color space to ease intuition.</p></li>
<li><strong>Device-independent</strong> color spaces are other than device dependent (including color spaces based on how humans perceive color).  These include XYZ color spaces as well as color spaces defined in terms of the XYZ color model, such as CIELAB and CIELUV.</li>
<li><strong>Lightness-based</strong> color spaces have three dimensions, one of which is a light-dark dimension and the other two of which are <em>chromaticity</em> dimensions.  Examples include HSL, CIE <em>L*C*h</em>, CIE XYZ, and Y&prime;C<sub><em>B</em></sub>C<sub><em>R</em></sub>.  Of these color spaces:

<ul>
<li><strong>Opponent</strong> color spaces are arranged in three axes: black/white, red/green, and blue/yellow.  Examples include CIELAB and Hunter L,a,b.<sup><a href="#Note2">(2)</a></sup></li>
</ul></li>
<li><strong>Hue-based</strong> color spaces have three dimensions, one of which is hue.  Examples include HSL, HSV, and CIE <em>L*C*h</em>.</li>
</ul>

<p><a id=Calculating_the_Mean_Hue_Angle></a></p>

<h2>Calculating the Mean Hue Angle</h2>

<p>The <code>MeanAngle</code> method, as given in the pseudocode below, finds the average of one or more angles expressed in radians (which is important when averaging colors in hue-based color models such as HSL, HSV, and CIE <em>L*C*h</em>, which contain hue components that are angles).</p>

<pre>METHOD MeanAngle(angles)
    if size(angles)==0: return 0
    xm=0
    ym=0
    i=0
    while i &lt; size(angles)
        c = cos(angles[i])
        s = sin(angles[i])
        i = i + 1
        xm = xm + (c - xm) / i
        ym = ym + (s - ym) / i
    end
    return atan2(ym, xm)
END
</pre>

<p><a id=Additional_Color_Formats></a></p>

<h2>Additional Color Formats</h2>

<p>The following color formats express RGB colors in <a href="https://peteroupc.github.io/colorgen.html#RGB_Integer_Formats">8/8/8 format</a> as text strings:</p>

<ul>
<li><strong>Delphi</strong> format: Consists of &quot;$00&quot; followed by six base-16 (hexadecimal) digits, two each for the blue, green, and red components, in that order.</li>
<li><strong>Visual Basic</strong> format: Consists of &quot;&amp;H&quot; followed by six base-16 digits, two each for the blue, green, and red components, in that order.</li>
<li><strong>C++</strong> format: Consists of &quot;0x00&quot; followed by six base-16 digits, two each for the three RGB components.  If the format expresses a Windows <code>COLORREF</code> color, the three components are blue, green, and red, in that order.</li>
<li><strong>PowerBuilder</strong> format: Consists of the integer form of the 8/8/8 format color, packed red/green/blue, in that order from lowest to highest bits.</li>
</ul>

<p><a id=Additional_Color_Models></a></p>

<h2>Additional Color Models</h2>

<p><a id=HSI></a></p>

<h3>HSI</h3>

<p>A color following the HSI color model consists of three components, in the following order:</p>

<ul>
<li><em>Hue</em> has the same general meaning as HSV hue, but is calculated differently.</li>
<li>A component called &quot;saturation&quot; is 0 or greater and 1 or less.</li>
<li>A component called &quot;intensity&quot;, the average of the red, green, and blue components, is 0 or greater and 1 or less.</li>
</ul>

<p>The conversions given below are independent of RGB color space, but should be done using <a href="https://peteroupc.github.io/colorgen.html#Linearized_and_Companded_RGB"><em>linearized RGB</em> colors</a>.</p>

<pre>METHOD RgbToHsi(rgb)
    sum=rgb[0]+rgb[1]+rgb[2]
    if sum==0: return [0,0,0]
    r=rgb[0]*1.0/sum
    g=rgb[1]*1.0/sum
    b=rgb[2]*1.0/sum
    coshue=(2*r-g-b)/(2*sqrt((b-g)*(b-r)+(g-r)*(g-r)))
    hue=atan2(sqrt(1-coshue*coshue),coshue)
    if b&gt;g: hue=2*pi-hue
    return [hue, 1-min(r,g,b)*3, sum/3.0]
END METHOD

METHOD HsiToRgb(hsi)
   h=hsi[0]
   if h &lt; 0: h = pi * 2 - mod(-h, pi * 2)
   if h &gt;= pi * 2: h = mod(h, pi * 2)
   deg120=2*pi/3
   hmod=mod(h, deg120)
   a=hsi[2]*(1-hsi[1])
   b=(hsi[1]*cos(hmod)/sin(hmod+pi/6)+1)*hsi[2]
   c=3*hsi[2]-a-b
   if h&gt;=deg120 and h &lt; deg120*2: return [a,b,c]
   if h&gt;=deg120*2: return [c,a,b]
   return [b,c,a]
END METHOD
</pre>

<p><a id=Hunter_L_a_b></a></p>

<h3>Hunter L,a,b</h3>

<p>The conversion between XYZ and Hunter L,a,b colors is as given below.</p>

<pre>METHOD HunterLabFromXYZ(xyz, wpoint)
    x=xyz[0]/wpoint[0]
    y=xyz[1]/wpoint[1]
    z=xyz[2]/wpoint[2]
    l=100*sqrt(y)
    if l==0: return [0,0,0]
    a=(7*sqrt(102)*sqrt(wpoint[0]/y)*(x-wpoint[0]*y))/(4*wpoint[0])
    b=(77*sqrt(70)*sqrt(wpoint[2]/y)*(wpoint[2]*y-z))/(100*wpoint[2])
    return [l,a,b]
END METHOD

METHOD HunterLabToXYZ(lab, wpoint)
    y=lab[0]*lab[0]/10000.0
    if y==0: return [0,0,0]
    x=2*sqrt(102)*lab[1]*wpoint[0]/(357*sqrt(wpoint[0]/y))+wpoint[0]*y
    z=-10*sqrt(70)*lab[1]*wpoint[2]/(539*sqrt(wpoint[2]/y))+wpoint[2]*y
    return [x,y/wpoint[1],z]
END METHOD
</pre>

<p>The <code>LabToHue</code>, <code>LabToChroma</code>, <code>LabHueDifference</code>,
<code>LabChromaHueDifference</code>, and
<code>LchToLab</code> methods from the <a href="colorgen.html#CIELAB">discussion on CIELAB colors</a> work with
Hunter L, a, b colors analogously to CIELAB colors.</p>

<p>The difference in lightness, <em>a</em>, <em>b</em>, or chroma (<em>&Delta;L</em>, <em>&Delta;a</em>, <em>&Delta;b</em>, or <em>&Delta;C</em>, respectively), between two Hunter L, a, b colors is simply the difference between the corresponding value of the second Hunter L, a, b color and that of the first.</p>

<p><a id=Irrelevant_Topics></a></p>

<h2>Irrelevant Topics</h2>

<p>The following topics on color are rarely relevant to programmers:</p>

<ul>
<li>The psychology, symbolism, or &quot;meaning&quot; of colors, since they vary from culture to culture and can change over time, even within the same culture.</li>
<li>Language differences in color lexicons, for the same reason.</li>
<li>&quot;Color forecasting&quot;, or predicting which colors will be in high demand, especially in the fashion and design realms.</li>
</ul>

<p><a id=Notes></a></p>

<h2>Notes</h2>

<p><small></p>

<p><sup id=Note1>(1)</sup> The colors that such lights or colorants are based on can be called &quot;primary colors&quot;; it&#39;s only in the context of light-mixture, colorant-mixture, or opponent color spaces that &quot;primary colors&quot; are normally relevant to programming.  Note that some light-mixture color spaces, such as the <a href="http://www.oscars.org/science-technology/sci-tech-projects/aces">ACES2065-1 RGB color space</a>, include imaginary points for one or more &quot;primary colors&quot; in exchange for covering a range of colors not normally possible otherwise.  Moreover, in my opinion, &quot;additive mixture&quot; and &quot;subtractive mixture&quot; are inferior terms to light mixture and colorant mixture, respectively.</p>

<p><sup id=Note2>(2)</sup> In the context of such color spaces, the colors red, green, blue, and yellow are often called the <em>unique hues</em>, and those colors, with or without white and black, can be called &quot;primary colors&quot;.  Here, such &quot;primary colors&quot; serve more to anchor the location of a particular color in the color space than to &quot;mix all colors&quot; or represent specific colored lights or colorants.</p>

<p></small></p>

<p><a id=License></a></p>

<h2>License</h2>

<p>This page is licensed under <a href="https://creativecommons.org/publicdomain/zero/1.0/">Creative Commons Zero</a>.</p>
</div><nav id="navigation"><ul>
<li><a href="/">Back to start site.</a>
<li><a href="https://github.com/peteroupc/peteroupc.github.io">This site's repository (source code)</a>
<li><a href="https://github.com/peteroupc/peteroupc.github.io/issues">Post an issue or comment</a></ul>
<p>
If you like this software, you should consider donating to me, Peter O., at the link below:</p>
<p class="printonly"><b>peteroupc.github.io</b></p>
<div class="noprint">
<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=56E5T4FH7KD2S">
<img src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif"
name="submit" border="2" alt="PayPal - The safer, easier way to pay online!"></a>
<p>
<a href="//twitter.com/share" class="twitter-share-button" data-count="horizontal" data-lang="en">Share via Twitter</a>
<script type="text/javascript" charset="UTF-8" src="https://platform.twitter.com/widgets.js"></script>
<span><g:plusone size="medium"></g:plusone></span><br/>
<span><a href="//www.facebook.com/sharer/sharer.php" id="sharer">Share via Facebook</a></span>
</p>
</div>
</nav><script>
if(document.location.href.indexOf("file://")!=0){
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = '//apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
}
document.getElementById("sharer").href="//www.facebook.com/sharer/sharer.php?u="+
    encodeURIComponent(document.location.href)
</script>
</body></html>
