<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8"><title>JSDoc: Tutorial: surfaces</title>
<script src="mathml.js"></script>
</head>
<body style="margin-top:0px">
<div style="width:75%;float:left;">
    <h1>Tutorial: surfaces</h1>
    <section>

<header>

    <h2>surfaces</h2>
</header>

<article>
    <h2>Introduction</h2><p>This tip describes parametric curves and surfaces and how to generate them using my
public-domain <a href="http://peteroupc.github.io/html3dutil">HTML 3D Library</a>.</p>
<p><strong>Download the latest version of the library at the <a href="https://github.com/peteroupc/html3dutil/releases">HTML 3D Library's Releases page</a>.</strong></p>
<h2>What Is a Parametric Surface?</h2><p>A <em>parametric surface</em> is a surface generated by evaluating the results of a <em>vector function</em>.  This vector function
takes two numbers, U and V, and returns a 3D point, X, Y, and Z.  Each (U, V) point corresponds to an (X, Y, Z)
point that lies on the surface.</p>
<p>A <em>vector function</em> in 3D is a combination of three functions, one for each dimension:</p>
<ul>
<li><strong>F</strong>(u, v) = [ <em>x</em>(u, v), <em>y</em>(u, v), <em>z</em>(u, v) ];</li>
</ul>
<p>The <em>x</em> function returns an X coordinate given u and v, and likewise for <em>y</em> and <em>z</em>.
Since the <em>z</em> function returns a Z coordinate, the surface will be in 2D if <em>z</em> always returns
the same value.</p>
<p>For example, if we have a parametric surface defined by the following functions:</p>
<ul>
<li><em>x</em>(u, v) = u * v</li>
<li><em>y</em>(u, v) = -u</li>
<li><em>z</em>(u, v) = u * sqrt(v)</li>
</ul>
<p>and we evaluate the UV point (2, 4), then we have:</p>
<ul>
<li><strong>F</strong>(2, 4) = [ 2 <em> 4, -2, 2 </em> sqrt(4) ];</li>
<li><strong>F</strong>(2, 4) = [ 8, -2, 4 ];</li>
</ul>
<p>So (8, -2, 4) is one point that lies on this parametric surface, and any other point on the
surface can be found by evaluating different UV points.  By the way, the surface looks like this:</p>
<p><img src="surfaces1.png" alt="The parametric surface."></p>
<h3>Why two variables?</h3><p>The surface functions take two variables, <em>u</em>, and <em>v</em>, because a parametric
surface can be a seen as a &quot;warped&quot; version of a rectangular grid.  The vector
function &quot;warps&quot; this grid into a three-dimensional surface.</p>
<h2>Parametric Surfaces in the HTML 3D Library</h2><p>The HTML 3D Library supports parametric surfaces using a class named <a href="http://peteroupc.github.io/html3dutil/glutil.SurfaceEval.html"><code>SurfaceEval</code></a>.  It helps
generate vertex coordinates, texture coordinates, normals, and colors using a parametric surface
function.  The following helper function, <code>makeMesh</code>, generates a parametric surface mesh
that was used to produce the pictures on this page. <code>makeMesh</code> is only included in the demo, not
in the HTML 3D Library.</p>
<p>The comments explain how <code>makeMesh</code> works in detail.</p>
<pre class="prettyprint source"><code>function makeMesh(func,resolution){
 // Default resolution is 50
 if(resolution==null)resolution=50
  // create a new mesh
  var mesh=new Mesh();
  // define a color gradient evaluator for
  // demonstration purposes.  Instead of X, Y, and Z,
  // generate a Red/Green/Blue color based on
  // the same parameters U and V as the surface
  // function for 3D points.
  var colorGradient={
   evaluate:function(u,v){ return [1-u,v,u]; }
  }
 // generate the parametric surface.
 var ev=new SurfaceEval()
  .vertex(func)
// Specify the color gradient evaluator defined above
  .color(colorGradient)
// Generate normals for the parametric surface,
// which is required for lighting to work correctly
  .setAutoNormal(true)
// Evaluate the surface and generate a triangle
// mesh, using resolution+1 different U-coordinates ranging
// from 0 to 1, and resolution+1
// different V-coordinates ranging from 0 to 1
// Instead of Mesh.TRIANGLES, we could use
// Mesh.LINES to create a wireframe mesh,
// or Mesh.POINTS to create a point mesh.
  .evalSurface(mesh,Mesh.TRIANGLES,resolution,resolution);
// Surface generated, return the mesh
return mesh;
}</code></pre><p>In the HTML 3D Library, parametric surface objects define one method, &quot;evaluate&quot;,
which returns a 3D point given a U parameter and a V parameter.  (By default, U and
V each range from 0 through 1.)</p>
<p>The following code is a very simple surface evaluator.</p>
<pre class="prettyprint source"><code>var evaluator = {
  &quot;evaluate&quot;:function(u, v){
    // Take the U parameter as the X coordinate,
    // the V parameter as the Y coordinate, and 0 as
    // the Z coordinate.
    return [u, v, 0];
  }
}</code></pre><p>That evaluator simply generates a square at the top-right quadrant:</p>
<p><img src="surfaces2.png" alt="The parametric surface."></p>
<p>And the following evaluator generates a circle:</p>
<pre class="prettyprint source"><code>var evaluator = {
  &quot;evaluate&quot;:function(u, v){
     // Extend the range of v
     v*=Math.PI*2;
     // Return circle coordinates.
     return [u*Math.cos(v),u*Math.sin(v),0];
  }
}</code></pre><p><img src="surfaces3.png" alt="The parametric surface."></p>
<p>Now here's the interesting part: This evaluator returns not a circle,
but a <em>cone</em>, whose length runs along the negative z-axis:</p>
<pre class="prettyprint source"><code>var evaluator = {
  &quot;evaluate&quot;:function(u, v){
     // Extend the range of v
     v*=Math.PI*2;
     // Return cone coordinates, using the u
     // parameter as the z-axis.
     return [u*Math.cos(v),u*Math.sin(v),-u];
  }
}</code></pre><p>The following shape was rotated to show the z-axis; the rotation isn't perfect.</p>
<p><img src="surfaces4.png" alt="The parametric surface."></p>
<p>Note that all three examples above use a value named <code>evaluator</code>.  To generate
a mesh with an evaluator and add it to the 3D scene, you then need to do:</p>
<pre class="prettyprint source"><code>// Assumes that a Scene3D object named _scene_ was previously defined.
// Create a 3D shape using the makeMesh method given earlier on this page
var shape = scene.makeShape(makeMesh(evaluator));
// Add the shape to the 3D scene
scene.addShape(shape);</code></pre><p>The generated 3D mesh from a parametric surface is just like any
other mesh, and the same functions and methods you use for other meshes
can be used on this mesh as well.  For more information, see the
<a href="http://www.codeproject.com/Tips/896839/Public-Domain-HTML-ThreeD-Library">overview page</a>
and the API references for the <a href="http://peteroupc.github.io/html3dutil/glutil.Mesh.html"><code>Mesh</code></a> and
<a href="http://peteroupc.github.io/html3dutil/glutil.Shape.html"><code>Shape</code></a> classes.</p>
<h2>Chaining Surface Functions</h2><p>The technique of using evaluators is very flexible.  In fact, you can chain evaluators,
using the output of one evaluator as the input of another evaluator.  This can be used
to transform the surface's points to new positions.</p>
<p>As an example, we'll define a new evaluator that shifts the position
of a parametric surface.  It takes an existing surface evaluator and the X, Y, and
Z of how many units to shift the surface.  Note that this class includes its
own <code>evaluate</code> method, allowing itself to be passed to the SurfaceEval class
or the makeMesh class above.</p>
<pre class="prettyprint source"><code>function SurfaceShifter(evaluator, x, y, z) {
 // Shift the surface by X units.
 this.x = x;
 // Shift the surface by Y units.
 this.y = y;
 // Shift the surface by Z units.
 this.z = z;
 this.evaluator = evaluator;
 // Define the surface shifter function
 this.evaluate = function(u, v){
  // Get the coordinates from the source evaluator
  var retval = this.evaluator(u, v);
  // Shift the coordinates
  retval[0]+=this.x;
  retval[1]+=this.y;
  retval[2]+=this.z;
  // And return the new coordinates.
  return retval;
 }
}</code></pre><p>And here's an example of its use.  We'll take the circle surface given above,
and create a SurfaceShifter object that shifts the circle by 3 units horizontally
and vertically (by default, the circle will be centered at the origin (0, 0, 0)).</p>
<pre class="prettyprint source"><code>// This is the circle surface from before
var evaluator = {
  &quot;evaluate&quot;:function(u, v){
     // Extend the range of v
     v*=Math.PI*2;
     // Return circle coordinates.
     return [u*Math.cos(v),u*Math.sin(v),0];
  }
}
// Create a shifter that results in the circle being moved 3 units
// up and 3 units to the right
evaluator = new SurfaceShifter(evaluator, 3, 3, 0);</code></pre><h2>Parametric Curves</h2><p>The HTML 3D library also includes support for generating parametric curves.
A <em>parametric curve</em> is a curve generated by a vector function, like a parametric
surface, except now, the function only uses a single variable, as shown below:</p>
<ul>
<li><strong>C</strong>(u) = [ <em>x</em>(u), <em>y</em>(u), <em>z</em>(u) ];</li>
</ul>
<p>As before, the <em>x</em>, <em>y</em>, and <em>z</em> functions return the corresponding
coordinates of the curve.
And each (U) point corresponds to an (X, Y, Z) point that lies on the curve.</p>
<p>The curve function takes a single <em>u</em> variable because a parametric
curve can be a seen as a &quot;warped&quot; version of a line.</p>
<p>One simple example of a parametric curve is a circle.  In fact, the same source
code for the circle surface given above can also serve as the parametric curve
function, since it only uses the variable <em>u</em>, not <em>v</em>.</p>
<p>Note that any surface evaluator that only uses <em>u</em> can easily serve as a
parametric curve evaluator, as can any surface in which the <em>v</em> parameter is
kept to the same value, such as 0, 1, or any other constant number.</p>
<h3>Generating Parametric Curves</h3><p>The HTML 3D Library's <code>CurveEval</code> class generates vertices for
a parametric curve.</p>
<p>Use code like the following to generate a mesh describing a parametric
curve.  It assumes that <code>evaluator</code> is a parametric curve object, just like
the circle example above.</p>
<pre class="prettyprint source"><code>  var mesh=new Mesh();
  // set the color
  mesh.color3(&quot;black&quot;);
  // Create a curve evaluator
  var ev=new CurveEval()
  .vertex(evaluator)
   // Evaluate the curve, using 100 lines
  .evalCurve(mesh,Mesh.LINES,100);</code></pre><h2>Demos</h2><ul>
<li><a href="https://peteroupc.github.io/html3dutil/demos/surfaces.html">surfaces.html</a> - Demonstrates parametric surfaces.</li>
</ul>
<p>This demo contains several examples of parametric surfaces.   The source code defines several classes that create evaluators of parametric surfaces:</p>
<ul>
<li><code>new Superellipsoid(xRadius, yRadius, zRadius, n, m)</code><br>
 Creates a &quot;<a href="http://en.wikipedia.org/wiki/Superellipsoid">superellipsoid</a>&quot; shape, with a radius <code>xRadius</code> along the X-axis,
 <code>yRadius</code> along the Y-axis, and <code>zRadius</code> along the z-axis.  The parameters <code>m</code> and <code>n</code> may be omitted; the default for each is 1, which creates a normal ellipsoid.</li>
<li><code>new Supertoroid(xRadius, yRadius, zRadius, innerRadius, n, m)</code><br>
 Creates a &quot;<a href="http://en.wikipedia.org/wiki/Supertoroid">supertoroid</a>&quot; shape (with a hole in the middle), with a radius <code>xRadius</code> along the X-axis, <code>yRadius</code> along the Y-axis, and <code>zRadius</code> along the z-axis.  The inner radius will be <code>innerRadius</code>. The parameters <code>m</code> and <code>n</code> may be omitted; the default for each is 1, which creates a normal torus or toroid.</li>
<li><code>new RevolutionSurface(func,minValue,maxValue)</code><br>
 Creates a <a href="http://en.wikipedia.org/wiki/Surface_of_revolution">surface of revolution</a> of a single-parameter function <code>func</code>, from <code>minValue</code> to <code>maxValue</code>.</li>
<li><code>new KleinBottle()</code><br>Creates a Klein bottle.</li>
<li><code>new MoebiusStrip()</code><br>Creates a M&ouml;bius strip.</li>
</ul>
<p>These are only some of the many possible kinds of parametric surfaces.</p>
<h3>Creating Your Own Curves and Surfaces</h3><p>Two other demos include a formula editor allowing you to experiment with
parametric curves and surfaces, and to export them to source code appropriate
for use in the Public Domain HTML 3D Library.</p>
<ul>
<li><a href="https://peteroupc.github.io/html3dutil/demos/curvesexpr.html">curvesexpr.html</a> - Demonstrates parametric
curves, with a custom formula editor.</li>
<li><a href="https://peteroupc.github.io/html3dutil/demos/surfacesexpr.html">surfacesexpr.html</a> - Demonstrates parametric
surfaces, with a custom formula editor.</li>
</ul>
<h2>Other Pages</h2><p>The following pages of mine on CodeProject also discuss this library:</p>
<ul>
<li><a href="http://www.codeproject.com/Tips/896839/Public-Domain-HTML-ThreeD-Library"><em>Public-Domain HTML 3D Library</em></a></li>
<li><a href="http://www.codeproject.com/Tips/987914/Creating-shapes-using-the-Public-Domain-HTML-D-Lib"><em>Creating shapes using the Public Domain HTML 3D Library</em></a></li>
<li><a href="http://www.codeproject.com/Tips/989978/The-Camera-and-the-Projection-and-View-Transforms"><em>The &quot;Camera&quot; and the Projection and View Transforms</em></a></li>
<li><a href="http://www.codeproject.com/Articles/993433/Graphics-Filters-for-the-HTML-D-Canvas"><em>Graphics Filters for the HTML 3D Canvas</em></a></li>
</ul>
</article>

</section>

</div>
<nav style="float: right;width: 25%;border-left: 1px solid;margin-top:0px;box-sizing: border-box;padding-left: 1em;">
<p>
If you like this software, you should consider donating to me, Peter O., at the link below:</p>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif"
name="submit" border="2" alt="PayPal - The safer, easier way to pay online!">
<img alt="" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
<p>
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-lang="en">Share via Twitter</a>
<script type="text/javascript" charset="UTF-8" src="http://platform.twitter.com/widgets.js"></script>
<span><g:plusone size="medium"></g:plusone></span><br/>
<span><fb:like send="true" width="300" show_faces="true"></fb:like></span>
</p>
<h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-glmath.html">glmath</a></li><li><a href="module-glutil.html">glutil</a></li></ul><h3>Classes</h3><ul><li><a href="BezierCurve.html">BezierCurve</a></li><li><a href="BezierSurface.html">BezierSurface</a></li><li><a href="BSplineCurve.html">BSplineCurve</a></li><li><a href="BSplineSurface.html">BSplineSurface</a></li><li><a href="CurveEval.html">CurveEval</a></li><li><a href="glmath.GLMath.html">GLMath</a></li><li><a href="glutil.GLUtil.html">GLUtil</a></li><li><a href="glutil.Lights.html">Lights</a></li><li><a href="glutil.LightSource.html">LightSource</a></li><li><a href="glutil.Material.html">Material</a></li><li><a href="glutil.Mesh.html">Mesh</a></li><li><a href="glutil.Meshes.html">Meshes</a></li><li><a href="glutil.Scene3D.html">Scene3D</a></li><li><a href="glutil.ShaderProgram.html">ShaderProgram</a></li><li><a href="glutil.Shape.html">Shape</a></li><li><a href="glutil.ShapeGroup.html">ShapeGroup</a></li><li><a href="glutil.SurfaceEval.html">SurfaceEval</a></li><li><a href="glutil.Texture.html">Texture</a></li><li><a href="glutil.Transform.html">Transform</a></li><li><a href="MatrixStack.html">MatrixStack</a></li><li><a href="ObjData.html">ObjData</a></li><li><a href="Promise.html">Promise</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-camera.html">camera</a></li><li><a href="tutorial-filters.html">filters</a></li><li><a href="tutorial-glmath.html">glmath</a></li><li><a href="tutorial-overview.html">overview</a></li><li><a href="tutorial-shapes.html">shapes</a></li><li><a href="tutorial-surfaces.html">surfaces</a></li><li><a href="tutorial-textures.html">textures</a></li></ul>
</nav>
<script>
if(document.location.href.indexOf("file://")!=0){
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = '//apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
}
</script>
</body>
</html>
